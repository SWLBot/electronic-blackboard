{% extends "index.html" %}
{% block body %}
  <div class="container">
  <div class="jumbotron">
  <div class="row">
    <div class="col-lg-4">
  {% if img %}
  <form class="form" method="post" enctype="multipart/form-data">
    <input type="hidden" name="type" value="image"/>
    <label><strong>圖片ID :</strong>{{img[0]}}</label><br>
    <label><strong>圖片類型ID:</strong>
        <select name='data_type' id='data_type'>
            {% for type in  data_types %}
            <option value={{type[0]}} {% if img[1] == type[0] %} selected="selectd" {% end %}>{{type[1]}}</option>
            {% end %}
        </select>
    </label><br>
    <label><strong>圖片名稱:</strong>{{img[4]}}</label><br>
    <label><strong>上傳時間:</strong>{{img[5]}}</label><br>
    <label><strong>開始播放日期:</strong><input type="date" name="start_date" value="{{img[6]}}"/></label><br>
    <label><strong>結束播放日期:</strong><input type="date" name="end_date" value="{{img[7]}}"/></label><br>
    {% if img[8] < datetime.timedelta(days=0, seconds=0, microseconds=0, milliseconds=0, minutes=0, hours=10, weeks=0) %}
    <label><strong>開始播放時間:</strong><input type="time" step="1" name="start_time" value="0{{img[8]}}"/></label><br>
    {% else %}
    <label><strong>開始播放時間:</strong><input type="time" step="1" name="start_time" value="{{img[8]}}"/></label><br>
    {% end %}
    {% if img[9] < datetime.timedelta(days=0, seconds=0, microseconds=0, milliseconds=0, minutes=0, hours=10, weeks=0) %}
    <label><strong>結束播放時間:</strong><input type="time" step="1" name="end_time" value="0{{img[9]}}"/></label><br>
    {% else %}
    <label><strong>結束播放時間:</strong><input type="time" step="1" name="end_time" value="{{img[9]}}"/></label><br>
    {% end %}
    <label><strong>單次播放秒數:</strong><input type="text" name="display_time" value="{{img[11]}}"/></label><br>
    {% module xsrf_form_html() %}
    <input type="submit" class="btn btn-primary"/>
  </form>
  {% else %}
  <form class="form" method="post" enctype="multipart/form-data">
    <input type="hidden" name="type" value="text"/>
    <label><strong>文字ID:</strong>{{text[0]}}</label><br>
    {% if text_content %}
        {% if text[1] == 3 %}
            <label><strong>活動名稱:</strong><input type='text' name='title1' value="{{text_content['title1']}}"/></label><br>
            <input type=hidden value="{{text_content['title2']}}"/>
            <label><strong>活動內容:</strong><textarea name='description' />{{text_content['description']}}</textarea></label><br>
            <input type=hidden value="{{text_content['year']}}"/>
            <input type=hidden value="{{text_content['month']}}"/>
        {% elif text[1] == 2 %}
            <label><strong>獲獎人:</strong><input type='text' name='title1' id='person_name2' value="{{text_content['title1']}}"/></label><br>
            <label><strong>獲得獎項:</strong><input type='text' name='title2' id='reward' value="{{text_content['title2']}}"/></label><br>
            <label><strong>附註:</strong><textarea name='description' id='description'/>{{text_content['description']}}</textarea></label><br>
            <label><strong>獲獎時間:</strong>
                    <select id="year" name="year">
                    <script>
                    var myDate = new Date();
                    var year = myDate.getFullYear();
                    var selected_year = {{ text_content['year'] }};
                    for(var i = year; i > year-11 ; i--){
                        document.write('<option value="'+i+'">'+i+'</option>');
                    }
                    $('select#year').val(selected_year);
                    </script>
                    </select>
                    <select name="month" id="month">
                        <option value = "1">01</option>
                        <option value = "2">02</option>
                        <option value = "3">03</option>
                        <option value = "4">04</option>
                        <option value = "5">05</option>
                        <option value = "6">06</option>
                        <option value = "7">07</option>
                        <option value = "8">08</option>
                        <option value = "9">09</option>
                        <option value = "10">10</option>
                        <option value = "11">11</option>
                        <option value = "12">12</option> 
                        <script>
                            var selected_month = "{{ text_content['month'] }}";
                            $('select#month').children().each(function(){
                                if($(this).val() === selected_month){
                                    $(this).attr('selected','selected');
                                }
                            });
                        </script>
                    </select>
                    </label>
        {% end %}
    {% end %}
    <label><strong>圖片類型ID:</strong>
        <select name='data_type' id='data_type'>
            {% for type in  data_types %}
            <option value={{type[0]}} {% if text[1] == type[0] %} selected="selectd" {% end %}>{{type[1]}}</option>
            {% end %}
        </select>
    </label><br>
    <label><strong>上傳時間:</strong>{{text[4]}}</label><br>
    <label><strong>開始播放日期:</strong><input type="date" name="start_date" value="{{text[5]}}"/></label><br>
    <label><strong>結束播放日期:</strong><input type="date" name="end_date" value="{{text[6]}}"/></label><br>
    <label><strong>開始播放時間:</strong><input type="time" name="start_time" value="{{text[7]}}"/></label><br>
    <label><strong>結束播放時間:</strong><input type="time" name="end_time" value="{{text[8]}}"/></label><br>
    <label><strong>單次播放秒數:</strong><input type="text" name="display_time" value="{{text[10]}}"/></label><br>
    {% module xsrf_form_html() %}
    <input type="submit" class="btn btn-primary"/>
  </form>
  {% end %}
    </div>
    <div class="col-lg-8">
    {% if img %}
      <img src="{{ static_url("thumbnail/"+img[3]) }}"/>
    {% end %}
    </div>
  </div>
  {% if flash %}
      <br><p style="font-size: 14px">{{flash}}</p>
  {% end %}
  <a href="/" class="btn btn-link">回首頁</a>
  </div>
  </div>
{% end %}
